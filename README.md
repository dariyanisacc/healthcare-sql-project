# 🏥 Clinical Data Warehouse Project

*A nurse-built sandbox for designing, loading, and querying a fully-featured hospital database.*

![Schema Diagram](docs/schema_diagram.png) <!-- Replace once you export the PNG -->

---

## 🚀 Project Goal
Model a realistic inpatient environment—patients, encounters, providers, diagnoses, meds, labs, vitals—then load synthetic **HIPAA-safe** data so nurses, analysts, or developers can practice SQL analytics without touching real PHI.

## 🗂 Directory Layout
| Path | What's inside |
|------|---------------|
| **`sql/01_schema.sql`** | Core OLTP schema (patients → lab_results) |
| **`sql/02_indexes.sql`** | Performance indexes & constraints |
| **`sql/03_seed.sql`** | `COPY` commands that ingest the CSVs generated by Python |
| **`sql/04_views.sql`** | Analytics views (census, acuity, readmits, etc.) |
| **`sql/05_demo_queries.sql`** | Example KPI queries you can run in one shot |
| **`sql/06_performance_analysis.sql`** | EXPLAIN ANALYZE for query optimization |
| **`scripts/`** | Python Faker pipeline that spits out synthetic CSVs |
| **`data/raw/`** | Generated CSVs land here (git-ignored) |
| **`docs/`** | ER diagram & design notes |
| **`docker-compose.yml`** | Postgres 16 + pgAdmin in one command |
| **`tests/`** | pgTAP unit tests for schema and data integrity |
| **`.github/workflows/`** | CI pipeline with automated testing |

## 🏃‍♀️ Quick Start

### Option 1: Docker (Recommended)
```bash
# 1. Clone the repo
git clone https://github.com/dariyanisacc/healthcare-sql-project.git
cd healthcare-sql-project

# 2. Run automated setup
./setup_docker.sh
```

### Option 2: Local PostgreSQL
```bash
# 1. Clone the repo
git clone https://github.com/dariyanisacc/healthcare-sql-project.git
cd healthcare-sql-project

# 2. Run automated setup
./setup_and_test.sh
```

### Option 3: Manual Setup
See [QUICKSTART.md](QUICKSTART.md) for step-by-step instructions.

### 📖 Platform-Specific Guides
- **macOS Setup**: [docs/SETUP_MACOS.md](docs/SETUP_MACOS.md)
- **DBeaver Setup**: [docs/DBEAVER_SETUP.md](docs/DBEAVER_SETUP.md)
- **Docker Details**: [setup_docker.sh](setup_docker.sh)

*Everything runs on a laptop—no cloud account required.*

## 🧬 Schema Highlights
- **3-NF design** with clear PK/FK relationships
- **Industry code systems** baked in: ICD-10 for diagnoses, LOINC for labs
- **Row-level metadata** (created_at, updated_at) on every table
- **Separate clinical schema** to avoid cluttering public

## 📊 Built-in Analytics

| KPI / Report | SQL Object |
|--------------|------------|
| Real-time Census by Unit | `v_current_census` |
| Patient Acuity Scoring | `v_patient_acuity` |
| 30-Day Readmission Rate | `v_30day_readmissions` |
| Sepsis Screening (SIRS) | `v_sepsis_screening` |
| Critical Lab Alerts | `v_critical_labs` |
| High Fall Risk Patients | `v_high_fall_risk` |
| Medication Administration Record | `v_active_mar` |
| High-Alert Medications | `v_high_alert_medications` |
| Provider Workload | `v_provider_workload` |
| Length of Stay Analysis | `v_los_by_diagnosis` |

## 📈 Sample Data Scale
- **1,000** patients with full demographics
- **3,091** hospital encounters
- **120,366** medication administrations
- **87,631** lab results
- **89,169** vital sign recordings
- **15,993** nursing assessments
- **9,235** ICD-10 diagnoses
- **620** documented allergies

## 🔒 Data Privacy
**All data are 100% synthetic.** They're generated with Faker plus salted hashes so no combination of DOB + ZIP can be traced back to a real patient.

## 🛣 Roadmap
- [x] Docker Compose for 1-command startup
- [x] pgTAP unit tests for constraints & views
- [x] CI: GitHub Action that spins Postgres in a job, runs schema + tests
- [x] dbdiagram.io DBML file for ERD generation
- [x] Performance analysis with EXPLAIN ANALYZE
- [ ] Row-Level Security demo (nurses only see their unit)
- [ ] Dimensional star schema for BI workloads (stretch goal)
- [ ] Real-time dashboard with Metabase/Grafana
- [ ] Data quality monitoring dashboard
- [ ] FHIR API integration example

## 🤝 Contributing
Fork it, open a PR, or just steal ideas—totally fine. If you add a cool KPI, shout me out so I can test it!

## 📜 License
MIT—do whatever you want; don't sue me.

---

*Built by Dariyan Jones—PACU nurse, future informatics nerd, and proud dog-dad to Atlas.*